//----------------------------------------------------------------------------------------------------
// cParty
// : 파티 객체
//  -JHL-2012-03-02
//----------------------------------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace BlueEngine
{
	//----------------------------------------------------------------------------------------------------
	/// <summary>
	/// 파티 객체
	/// </summary>
	//----------------------------------------------------------------------------------------------------
	public class cParty : cEntity
	{
		//----------------------------------------------------------------------------------------------------
		#region 상수
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 최대 파티 아이디
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public		const	uint		MAX_PARTY_ID		= uint.MaxValue;
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 최대 파티원 수
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public		const	byte		MAX_PARTY_USER		= 3;
		#endregion

		//----------------------------------------------------------------------------------------------------
		#region 변수
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 파티 아이디
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		private		static	uint		s_party_id;
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 파티 아이디
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		protected			uint		m_party_id;
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 최대 파티원 수
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		protected			byte		m_max_user;
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 파티 : 잠금 : 입장
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		protected			bool		m_lock_in;
		#endregion

		//----------------------------------------------------------------------------------------------------
		#region 속성
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 최대 파티원수
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public				byte		MaxUser			{get{return m_max_user;}set{m_max_user=Math.Min( value, MAX_PARTY_USER );}}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 최대 파티수 ( 서버 최대 수용 인원 / 최대 파티원 수 )
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public		static	ushort		MaxParty		{get{return (ushort)cServer.MaxUser;}}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 새로운 유니크한 아이디를 얻는다.
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public		static	uint		UniquePartyID	{get{ lock(s_lock){return ++s_party_id;}}}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 파티 아이디
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public				uint		PartyID			{get{return m_party_id;}}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 파티 : 잠금 : 입장
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public				bool		LockIn			{get{return m_lock_in;}set{m_lock_in=value;}}
		#endregion


		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		/// <param name="max_user">최대 파티원수</param>
		//----------------------------------------------------------------------------------------------------
		public cParty( byte max_user ):base()
		{
			m_party_id	= UniquePartyID;
			LockIn		= false;
			MaxUser		= max_user; 
		}
	}
}
