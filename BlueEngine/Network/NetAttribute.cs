//----------------------------------------------------------------------------------------------------
// NetAttribute
// : 네트워크 특성
//  -JHL-2012-02-23
//----------------------------------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace BlueEngine
{
	//----------------------------------------------------------------------------------------------------
	/// <summary>
	/// 네트워크용 변수 특성.
	/// </summary>
	//----------------------------------------------------------------------------------------------------
	[AttributeUsage(AttributeTargets.Class)]
	public class NETCLASSAttribute : Attribute
	{
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 네트워크 동기화 주기.
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		protected float m_freq;
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 마지막 동기화된 시간.
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		protected float	m_last_sync_time;

		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 네트워크 동기화 주기.
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public	float Freq	{get{return m_freq;}}

		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public NETCLASSAttribute():this(0.2f){}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		/// <param name="freq">네트워크 동기화 주기.</param>
		//----------------------------------------------------------------------------------------------------
		public NETCLASSAttribute( float freq )
		{
			m_freq  = freq;
			m_last_sync_time = UnityEngine.Time.time;
		}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 네트워크 동기화될 시간인지 알아냄.
		/// </summary>
		/// <param name="time">현재 시간.</param>
		/// <returns>업데이트할 시간이지 유무.</returns>
		//----------------------------------------------------------------------------------------------------
		public bool IsSync( float time )
		{
			if( m_last_sync_time+m_freq < time ) return false;
			m_last_sync_time = time;
			return true;
		}
	}
	//----------------------------------------------------------------------------------------------------
	/// <summary>
	/// 네트워크용 변수 특성.
	/// </summary>
	//----------------------------------------------------------------------------------------------------
	[AttributeUsage(AttributeTargets.Field)]
	public class NETAttribute : Attribute
	{
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 변수 최대값. : 0이면 변수타입의 최대값
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		protected ulong m_max_size;
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 변수의 최대 소숫점 자릿수. : float,double 변수일때만 해당됨.
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		protected byte m_max_point;

		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 변수 최대값. : 0이면 변수타입의 최대값
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public		ulong MaxSize	{get{return m_max_size;}}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 변수의 최대 소숫점 자릿수. : float,double 변수일때만 해당됨.
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public		byte MaxPoint	{get{return m_max_point;}}

		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public NETAttribute():this(0){}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		/// <param name="max_size">변수 최대값.</param>
		//----------------------------------------------------------------------------------------------------
		public NETAttribute( uint max_size ):this(max_size,4){}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		/// <param name="max_size">변수 최대값.</param>
		/// <param name="max_point">변수의 최대 소숫점 자릿수.</param>
		//----------------------------------------------------------------------------------------------------
		public NETAttribute( uint max_size, byte max_point )
		{
			m_max_size  = max_size;
			m_max_point = max_point;
		}
	}
	//----------------------------------------------------------------------------------------------------
	/// <summary>
	/// 호스트용 변수 특성.
	/// </summary>
	//----------------------------------------------------------------------------------------------------
	[AttributeUsage(AttributeTargets.Field)]
	public class HOSTAttribute : NETAttribute
	{
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public HOSTAttribute():this(10000){}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		/// <param name="max_size">변수 최대값.</param>
		//----------------------------------------------------------------------------------------------------
		public HOSTAttribute( uint max_size ):this(max_size,4){}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		/// <param name="max_size">변수 최대값.</param>
		/// <param name="max_point">변수의 최대 소숫점 자릿수.</param>
		//----------------------------------------------------------------------------------------------------
		public HOSTAttribute( uint max_size, byte max_point ):base(max_size,max_point){}
	}
	//----------------------------------------------------------------------------------------------------
	/// <summary>
	/// 게스트용 변수 특성.
	/// </summary>
	//----------------------------------------------------------------------------------------------------
	[AttributeUsage(AttributeTargets.Field)]
	public class GUESTAttribute : NETAttribute
	{
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		//----------------------------------------------------------------------------------------------------
		public GUESTAttribute():this(10000){}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		/// <param name="max_size">변수 최대값.</param>
		//----------------------------------------------------------------------------------------------------
		public GUESTAttribute( uint max_size ):this(max_size,4){}
		//----------------------------------------------------------------------------------------------------
		/// <summary>
		/// 생성자
		/// </summary>
		/// <param name="max_size">변수 최대값.</param>
		/// <param name="max_point">변수의 최대 소숫점 자릿수.</param>
		//----------------------------------------------------------------------------------------------------
		public GUESTAttribute( uint max_size, byte max_point ):base(max_size,max_point){}
	}
}
